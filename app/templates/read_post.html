{% extends "base.html" %}

{% block app_content %}
<div class="container float-start">
<div class="btn-sm rounded-pill btn-outline-light float-start">
    <a class='text-decoration-none text-danger font-monospace' href="{{ url_for('index') }}"> &larrhk; Back</a> 
</div>
</div>
<br>
<div class='container'>
    <table class=" row ">
        <tr class='row align-items-center'>
            <p><strong>Author: </strong>{{ post.author.username.capitalize() }} 
                {%if authorate >=4%}
                <span class='badge bg-success text-wrap '> {{authorate}} of {{total(username=post.author.username)}} </span> </p>
                {%elif 4>authorate >=2 %}
                <span class='badge bg-warning text-wrap '> {{authorate}} of {{total(username=post.author.username)}}</span> </p>
                {%elif authorate<2 %}
                <span class='badge bg-danger text-wrap '> {{authorate}} of {{total(username=post.author.username)}}</span> </p>
                {%endif%}
        </tr>

        <tr >
        {%for cont in conts%}
            <p><strong>Co-Author  #{{cont.id}}:  </strong> {{ cont.contributor.capitalize()}} 
                {%if 4<= user_rating(username=cont.contributor) %}
                <span class='badge bg-success text-wrap d-inline'> {{user_rating(username=cont.contributor)}} of {{total(username=cont.contributor)}}</span> </p>
                {%elif 4 > user_rating(username=cont.contributor) >=2 %}
                <span class='badge bg-warning text-wrap d-inline'> {{user_rating(username=cont.contributor)}} of {{total(username=cont.contributor)}}</span> </p>
                {%elif user_rating(username=cont.contributor) <2 %}
                <span class='badge bg-danger text-wrap d-inline'> {{user_rating(username=cont.contributor)}}of {{total(username=cont.contributor)}} </span> </p>
                {%endif%}

        {%endfor%}

        </tr>
        <hr>
        <tr>
            <p><strong>Text: </strong> </p>
            {{post.body | safe}}
        <br>

        </tr>
        <tr>
            {%for cont in conts%}
                {%if cont.accepted == 1%}
                    <p><strong>#{{cont.id}}. {{cont.subtitle}}:   </strong><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-square text-success" viewBox="0 0 16 16">
                        <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>
                        <path d="M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.235.235 0 0 1 .02-.022z"/>
                    </svg> </p>
                    {{ cont.body | safe}}
                {%elif post.user_id == current_user.id and cont.accepted ==2 and post.completed !=1%}
                    <p><strong>#{{cont.id}}. {{cont.subtitle}}:  </strong><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-square text-danger" viewBox="0 0 16 16">
                        <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>
                        <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
                    </svg> </p>
                    {{ cont.body | safe}}
                {%elif post.user_id == current_user.id and cont.accepted ==0 and post.completed !=1%}  
                <p><strong>#{{cont.id}}. {{cont.subtitle}}:  </strong><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-hourglass-split text-warning" viewBox="0 0 16 16">
                        <path d="M2.5 15a.5.5 0 1 1 0-1h1v-1a4.5 4.5 0 0 1 2.557-4.06c.29-.139.443-.377.443-.59v-.7c0-.213-.154-.451-.443-.59A4.5 4.5 0 0 1 3.5 3V2h-1a.5.5 0 0 1 0-1h11a.5.5 0 0 1 0 1h-1v1a4.5 4.5 0 0 1-2.557 4.06c-.29.139-.443.377-.443.59v.7c0 .213.154.451.443.59A4.5 4.5 0 0 1 12.5 13v1h1a.5.5 0 0 1 0 1h-11zm2-13v1c0 .537.12 1.045.337 1.5h6.326c.216-.455.337-.963.337-1.5V2h-7zm3 6.35c0 .701-.478 1.236-1.011 1.492A3.5 3.5 0 0 0 4.5 13s.866-1.299 3-1.48V8.35zm1 0v3.17c2.134.181 3 1.48 3 1.48a3.5 3.5 0 0 0-1.989-3.158C8.978 9.586 8.5 9.052 8.5 8.351z"/>
                    </svg> </p>
                    {{ cont.body | safe}}
                    {%endif%}
                {%endfor%}
        <br>
        </tr>
    </table>

<hr>

{%if post.user_id == current_user.id and post.completed !=1%}

<div class="container row">
    <div class="col-4">
        <h5>Decide what contribution to keep</h5>
    {{wtf.render_form(form2, button_map={'accept': 'success rounded-pill', 'reject': 'danger rounded-pill'}, button_size='sm') }}
    </div>
</div>
<hr>

</div>
<div class="row">
    <div class="col ">

{{ wtf.render_form(form) }}
    </div>
</div>
{%endif%}

{% endblock %}